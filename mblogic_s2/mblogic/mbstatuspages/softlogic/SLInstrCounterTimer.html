<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
	"http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<title>Help - Counter and Timer Instructions</title>

<link rel="icon" type="image/png" href="/systemicon.png">
<!-- General page layout style sheet. -->
<link rel="stylesheet" href="/helppagelayout.css" type="text/css">
</head>

<body>
<div id="filler">

	<div id="header">
		<p class="headlogo">
			<img src="/systemlogo.png" width="200" alt="MB Logic Logo"/>
			<span class="headtitle1">MBLogic </span>
			<span class="headtitle2"> for an open world in automation</span>
		</p>
	</div>



	<!-- This is the standard nav bar. -->
	<div id="nav">
		<ul>
			<li><a href="/statussystem.html">Home</a></li>
			<li><a href="/statuspages/statusconfigure.html">Configure</a></li>
			<li><a href="/statuspages/statuscontrol.html">Control</a></li>
			<li><a href="/statuspages/statusmonitor.html">Monitor Data</a></li>
			<li><a href="/statuspages/statussysmon.html">System</a></li>
			<li><a href="/statuspages/statusxref.html">XRef</a></li>
			<li><a href="/helpmain.html">Help</a></li>
		</ul>
	</div>


<hr>

	<!-- This is the help system nav bar. -->
	<div id="helpnav">
		<h2>Help Topics</h2>
		<ul>
			<li><a href="/helpmain.html">Help</a></li>
			<li><a href="/general/General-en.html">General</a></li>
			<li><a href="/statushelp/MBStatusHelp.html">System Status</a></li>
			<li><a href="/communications/ComsIntro-en.html">Communications</a></li>
			<li><a href="/softlogic/SLIntro-en.html">Soft Logic</a></li>
			<li><a href="/hmi/HMIIntro-en.html">HMI</a></li>
			<li><a href="/installation/InstallIntro-en.html">Installation</a></li>
			<li><a href="/general/About-en.html">About</a></li>
		</ul>

		<h3>Topic Details for Soft Logic</h3>
		<ul>
			<li><a href="SLSpecs-en.html">Specifications</a></li>
			<li><a href="SLAddressing-en.html">Addressing</a></li>
			<li><a href="SLInstructions-en.html">Instructions</a></li>
			<li><a href="SLPrograms-en.html">Programming</a></li>
			<li><a href="SLConfig-en.html">Configuration</a></li>
			<li><a href="SLStatus-en.html">Program Monitoring and Reloading</a></li>
			<li><a href="SLMemSave-en.html">Data Table Save/Restore</a></li>
		</ul>

	</div>



<div id="datadisplay">

<h1>Counter and Timer Instructions</h1>

<hr>

<table class="helptable"  border="1">

<tr>
	<th>Instr.</th>
	<th>Descr.</th>
	<th># Param</th>
	<th>T</th>
	<th>CT</th>
	<th>DS</th>
	<th>DD</th> 
	<th>KInt</th>
	<th>KDInt</th>
	<th>Time Base</th> 
	<th>Symbol</th>
</tr>

<tr>
	<td>CNTU</td>
	<td>Count up</td>
	<td>2</td>
	<td></td>
	<td>X</td>
	<td>X</td> 
	<td>X</td>
	<td>X</td>
	<td>X</td>
	<td></td>
	<td><img src="LadCNTU.png" width="150" alt="CNTU"></td>
</tr>

<tr>
	<td>CNTD</td>
	<td>Count down</td>
	<td>2</td>
	<td></td>
	<td>X</td> 
	<td>X</td>
	<td>X</td>
	<td>X</td>
	<td>X</td>
	<td></td>
	<td><img src="LadCNTD.png" width="150" alt="CNTD"></td>
</tr>

<tr>
	<td>UDC</td>
	<td>Up / down counter</td>
	<td>2</td>
	<td></td>
	<td>X</td> 
	<td>X</td>
	<td>X</td>
	<td>X</td>
	<td>X</td>
	<td></td>
	<td><img src="LadUDC.png" width="150" alt="UDC"></td>
</tr>

<tr>
	<td>TMR</td>
	<td>On delay timer</td>
	<td>3</td>
	<td>X</td>
	<td></td> 
	<td>X</td>
	<td></td>
	<td>X</td>
	<td></td>
	<td>X</td>
	<td><img src="LadTMR.png" width="150" alt="TMR"></td>
</tr>

<tr>
	<td>TMRA</td>
	<td>On delay accum. timer</td>
	<td>3</td>
	<td>X</td> 
	<td></td>
	<td>X</td>
	<td></td>
	<td>X</td>
	<td></td>
	<td>X</td>
	<td><img src="LadTMRA.png" width="150" alt="TMRA"></td>
</tr>

<tr>
	<td>TMROFF</td>
	<td>Off delay timer</td>
	<td>3</td>
	<td>X</td>
	<td></td> 
	<td>X</td>
	<td></td>
	<td>X</td>
	<td></td>
	<td>X</td>
	<td><img src="LadTMROFF.png" width="150" alt="TMROFF"></td>
</tr>

</table>

<h3>Counters</h3>
<p>Counter instructions come in three types:
</p>

<ul>
	<li>CNTU - Up counter. This counts up by one each time the logic stack 
	transitions from off to on. If the logic stack value (top - 1) turns on, 
	the counter is reset.</li>
	<li>CNTD - Down counter. This counts down by one each time the logic stack 
	transitions from off to on. If the logic stack value (top - 1) turns on, 
	the counter is reset.</li>
	<li>UDC - Up/down counter. This counts up by one each time the top of the 
	logic stack transitions from off to on, and down by one each time the logic 
	stack value (top - 1) transitions from off to on. When the logic stack 
	value (top - 2) turns on, the counter is reset </li>
</ul>


<p>All counter instructions take two parameters. The first is a counter number,
and the second is the counter preset. The counter preset may be either a constant
or a register address. When the present value of the counter is equal to the preset,
the counter status bit turns on. The address of the counter status bit is the same
as the counter number. The present value of the counter is stored in the counter
data register (CTD) of the same number as the counter number. E.g. for counter CT5,
the counter status bit is also CT5, and the present count is in CTD5.
</p>

<p>Example: </p>
<pre class="examples">

	// Up counter.
	NETWORK 1
	STR C1
	STR C2
	CNTU CT5 155793
	STR CT5
	OUT Y1
	
	// Down counter.
	NETWORK 2
	STR C11
	STR C12
	CNTD CT15 DD11
	STR CT15
	OUT Y11
	
	// Up/down counter.
	NETWORK 3
	STR C21
	STR C22
	STR C23
	UDC CT25 DS5
	STR CT25
	OUT Y21
	
	// Examine counter present values.
	NETWORK 7
	STRE CTD15 157
	OUT Y112

</pre>


<h3>Timers</h3>
<p>Timers come in  three types:
</p>

<ul>
	<li>TMR - On delay timer. The timer begins timing up when the top of the 
	logic stack is true, and resets when the top of the logic stack is false. 
	When the present value reaches the preset value, the timer status bit 
	turns on. </li>
	<li>TMRA - On delay accumulating timer. The timer begins timing up when 
	the top of the logic stack is true, and stops when the top of the logic 
	stack is false. When the top of the logic stack becomes true, it continues 
	timing from the point at which it stopped. When the logic stack value 
	(top - 1) turns on, the timer is reset. When the present value reaches the 
	preset value, and the top of the logic stack is true, the timer status bit 
	turns on.</li>
	<li>TMROFF - Off delay timer. The timer begins timing when the top of the 
	logic stack transitions from on to off. When the timer begins timing, the 
	status bit turns on immediately. The status bit turns off when the timer 
	reaches the preset. </li>
</ul>


<p>All timer instructions take three parameters. The first is the timer address.
The second is the timer preset. The timer preset may be either a constant or 
a register address. The third parameter is the time base. This may be either
"ms" (milliseconds), "sec" (seconds), "min" (minutes), "hour" (hours), or "day"
(days). 
</p>

<p>Example: </p>
<pre class="examples">

	// On delay timer.
	NETWORK 4
	STR X1
	TMR T5 25000 ms
	STR T5
	OUT Y51
	
	// Accumulating on delay timer.
	NETWORK 5
	STR X11
	STR X12
	TMRA T6 DS9 sec
	STR T6
	OUT Y52
	
	// Off delay timer.
	NETWORK 6
	STR X62
	TMROFF T192 DS412 min
	STR T192
	OUT Y57
	
	// Examine timer present values.
	NETWORK 7
	STRE TD6 97
	OUT Y120

</pre>


</div>

<div id="ladsampledisplay">

<hr>

<h2>Ladder Examples</h2>

<p>The following shows examples in ladder format. 
</p>

<p>
<img src="LadCounter1.png" width="840" alt="counter timer example 1">
<img src="LadCounter2.png" width="840" alt="counter timer example 2">
<img src="LadCounter3.png" width="840" alt="counter timer example 2">
<img src="LadTimers.png" width="840" alt="counter timer example 3">
</p>

</div>


<hr>

<!-- Standard footer -->
<div id="footer">
	<p>Help - Soft Logic</p>
</div>

</div>

</body>
</html>

<!-- Copyright 2009 - 2010. Michael Griffin
This file is part of MBLogic.
MBLogic is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.
MBLogic is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU General Public License for more details.
You should have received a copy of the GNU General Public License
along with MBLogic. If not, see <http://www.gnu.org/licenses/>.
 -->

