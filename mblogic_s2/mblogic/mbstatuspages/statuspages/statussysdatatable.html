<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
	"http://www.w3.org/TR/html4/strict.dtd">

<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<link rel="icon" type="image/png" href="/systemicon.png" >
<!-- General page layout style sheet. -->
<link rel="stylesheet" href="/statuspagelayout.css" type="text/css">

<!-- This controls the page display. -->
<script type="text/javascript" src="/statuspages/libstatusdatatable.js"></script>
<script type="text/javascript" src="/statuspages/libdata.js"></script>

<!-- Native JSON doesn't seem to be working in Opera 10.10. -->
<script type="text/javascript" src="/statuspages/json2.js"></script>


<title>System Data Table</title>

</head>

<body onload="pageinit();">

<div id="filler">

	<div id="header">
		<p class="headlogo">
			<img src="/systemlogo.png" width="200" alt="MB Logic Logo">
			<span class="headtitle1">MBLogic </span>
			<span class="headtitle2"> for an open world in automation</span>
		</p>
	</div>



	<!-- This is the standard nav bar. -->
	<div id="nav">
		<ul>
			<li><a href="/statussystem.html">Home</a></li>
			<li><a href="/statuspages/statusconfigure.html">Configure</a></li>
			<li><a href="/statuspages/statuscontrol.html">Control</a></li>
			<li><a href="/statuspages/statusmonitor.html">Monitor Data</a></li>
			<li><a href="/statuspages/statussysmon.html">System</a></li>
			<li><a href="/statuspages/statusxref.html">XRef</a></li>
			<li><a href="/helpmain.html">Help</a></li>
		</ul>
	</div>


<div id="datadisplay">
	
	<p><span class="itemheading">System Data Table View</span>  
	<span class="itemheading">
	<a href="/statuspages/statusdatatable.html">Soft Logic Data Table View</a></span>
	</p> 

	<hr>
	
	<p>Enter the system data table addresses you wish to monitor. 
	</p>
	
	
	<form name="systemdatatable" id="systemdatatable">

	<div class="datatablelcolumn">

		<h3>Address Type / Address / Value</h3>


		<p>
			<select name="addrtype00">
			<option>None</option>
			<option>Coil</option>
			<option>Discrete Input</option>
			<option>Holding Register</option>
			<option>Input Register</option>
			</select>

			<input type="text" maxlength="7" size="7" name="addr00">
			<span id="plcdata00" class="readdatavalues"></span>
		</p>


		<p>
			<select name="addrtype01">
			<option>None</option>
			<option>Coil</option>
			<option>Discrete Input</option>
			<option>Holding Register</option>
			<option>Input Register</option>
			</select>

			<input type="text" maxlength="7" size="7" name="addr01">
			<span id="plcdata01" class="readdatavalues"></span>
		</p>


		<p>
			<select name="addrtype02">
			<option>None</option>
			<option>Coil</option>
			<option>Discrete Input</option>
			<option>Holding Register</option>
			<option>Input Register</option>
			</select>

			<input type="text" maxlength="7" size="7" name="addr02">
			<span id="plcdata02" class="readdatavalues"></span>
		</p>


		<p>
			<select name="addrtype03">
			<option>None</option>
			<option>Coil</option>
			<option>Discrete Input</option>
			<option>Holding Register</option>
			<option>Input Register</option>
			</select>

			<input type="text" maxlength="7" size="7" name="addr03">
			<span id="plcdata03" class="readdatavalues"></span>
		</p>


		<p>
			<select name="addrtype04">
			<option>None</option>
			<option>Coil</option>
			<option>Discrete Input</option>
			<option>Holding Register</option>
			<option>Input Register</option>
			</select>

			<input type="text" maxlength="7" size="7" name="addr04">
			<span id="plcdata04" class="readdatavalues"></span>
		</p>


		<p>
			<select name="addrtype05">
			<option>None</option>
			<option>Coil</option>
			<option>Discrete Input</option>
			<option>Holding Register</option>
			<option>Input Register</option>
			</select>

			<input type="text" maxlength="7" size="7" name="addr05">
			<span id="plcdata05" class="readdatavalues"></span>
		</p>


		<p>
			<select name="addrtype06">
			<option>None</option>
			<option>Coil</option>
			<option>Discrete Input</option>
			<option>Holding Register</option>
			<option>Input Register</option>
			</select>

			<input type="text" maxlength="7" size="7" name="addr06">
			<span id="plcdata06" class="readdatavalues"></span>
		</p>


		<p>
			<select name="addrtype07">
			<option>None</option>
			<option>Coil</option>
			<option>Discrete Input</option>
			<option>Holding Register</option>
			<option>Input Register</option>
			</select>

			<input type="text" maxlength="7" size="7" name="addr07">
			<span id="plcdata07" class="readdatavalues"></span>
		</p>


		<p>
			<select name="addrtype08">
			<option>None</option>
			<option>Coil</option>
			<option>Discrete Input</option>
			<option>Holding Register</option>
			<option>Input Register</option>
			</select>

			<input type="text" maxlength="7" size="7" name="addr08">
			<span id="plcdata08" class="readdatavalues"></span>
		</p>


		<p>
			<select name="addrtype09">
			<option>None</option>
			<option>Coil</option>
			<option>Discrete Input</option>
			<option>Holding Register</option>
			<option>Input Register</option>
			</select>

			<input type="text" maxlength="7" size="7" name="addr09">
			<span id="plcdata09" class="readdatavalues"></span>
		</p>


	</div>
	
	<div class="datatablercolumn">

		<h3>Address Type / Address / Value</h3>

		<p>
			<select name="addrtype10">
			<option>None</option>
			<option>Coil</option>
			<option>Discrete Input</option>
			<option>Holding Register</option>
			<option>Input Register</option>
			</select>

			<input type="text" maxlength="7" size="7" name="addr10">
			<span id="plcdata10" class="readdatavalues"></span>
		</p>


		<p>
			<select name="addrtype11">
			<option>None</option>
			<option>Coil</option>
			<option>Discrete Input</option>
			<option>Holding Register</option>
			<option>Input Register</option>
			</select>

			<input type="text" maxlength="7" size="7" name="addr11">
			<span id="plcdata11" class="readdatavalues"></span>
		</p>


		<p>
			<select name="addrtype12">
			<option>None</option>
			<option>Coil</option>
			<option>Discrete Input</option>
			<option>Holding Register</option>
			<option>Input Register</option>
			</select>

			<input type="text" maxlength="7" size="7" name="addr12">
			<span id="plcdata12" class="readdatavalues"></span>
		</p>


		<p>
			<select name="addrtype13">
			<option>None</option>
			<option>Coil</option>
			<option>Discrete Input</option>
			<option>Holding Register</option>
			<option>Input Register</option>
			</select>

			<input type="text" maxlength="7" size="7" name="addr13">
			<span id="plcdata13" class="readdatavalues"></span>
		</p>


		<p>
			<select name="addrtype14">
			<option>None</option>
			<option>Coil</option>
			<option>Discrete Input</option>
			<option>Holding Register</option>
			<option>Input Register</option>
			</select>

			<input type="text" maxlength="7" size="7" name="addr14">
			<span id="plcdata14" class="readdatavalues"></span>
		</p>


		<p>
			<select name="addrtype15">
			<option>None</option>
			<option>Coil</option>
			<option>Discrete Input</option>
			<option>Holding Register</option>
			<option>Input Register</option>
			</select>

			<input type="text" maxlength="7" size="7" name="addr15">
			<span id="plcdata15" class="readdatavalues"></span>
		</p>


		<p>
			<select name="addrtype16">
			<option>None</option>
			<option>Coil</option>
			<option>Discrete Input</option>
			<option>Holding Register</option>
			<option>Input Register</option>
			</select>

			<input type="text" maxlength="7" size="7" name="addr16">
			<span id="plcdata16" class="readdatavalues"></span>
		</p>


		<p>
			<select name="addrtype17">
			<option>None</option>
			<option>Coil</option>
			<option>Discrete Input</option>
			<option>Holding Register</option>
			<option>Input Register</option>
			</select>

			<input type="text" maxlength="7" size="7" name="addr17">
			<span id="plcdata17" class="readdatavalues"></span>
		</p>


		<p>
			<select name="addrtype18">
			<option>None</option>
			<option>Coil</option>
			<option>Discrete Input</option>
			<option>Holding Register</option>
			<option>Input Register</option>
			</select>

			<input type="text" maxlength="7" size="7" name="addr18">
			<span id="plcdata18" class="readdatavalues"></span>
		</p>


		<p>
			<select name="addrtype19">
			<option>None</option>
			<option>Coil</option>
			<option>Discrete Input</option>
			<option>Holding Register</option>
			<option>Input Register</option>
			</select>

			<input type="text" maxlength="7" size="7" name="addr19">
			<span id="plcdata19" class="readdatavalues"></span>
		</p>


	</div>

	<div class="datatableclear"> 
	</div>
	
	</form>
	
	
	<p>
		<button id="monitorbutton" class="controlbuttons" 
							onclick="EnableUpdate();">Monitor</button>
		<button id="stopbutton"  class="controlbuttons" 
							onclick="DisableUpdate();">Stop</button>
		<button id="singlebutton"  class="controlbuttons" 
							onclick="SingleScan();">Single Scan</button>
	</p>


	<hr>

</div>


<!-- Standard footer -->
<div id="footer">
	<p>Data Monitor</p>
</div>

</div>

<!-- This is the code for creating the data in the page. -->

	<script type="text/javascript">

	// Disable the other extra control buttons.
	function DisableButtons() {
		var monbut = document.getElementById("monitorbutton");
		monbut.setAttribute("disabled", "disabled");
		var singlebut = document.getElementById("singlebutton");
		singlebut.setAttribute("disabled", "disabled");
	}


	// Make sure the control buttons are enabled after a page refresh.
	function EnableButtons() {
		// Enable the other buttons.
		var monbut = document.getElementById("monitorbutton");
		monbut.removeAttribute("disabled");
		var singlebut = document.getElementById("singlebutton");
		singlebut.removeAttribute("disabled");
	}


	// Handles displaying page data.
	var Monitor = new SysDataMonitor();

	// Handles communications with the server.
	var host = window.location.hostname;
	var port = window.location.port;
	var ServerData = new StatusDataIF(host, port, Monitor); 

	
	// Start up and initialisation.
	function pageinit() {

	}

	// Enable the input controls.
	EnableButtons();
	Monitor.EnableInputs();

	// Controls auto-scan.
	var UpdateEnabled = false;

	// Enables auto-scan.
	function EnableUpdate() {
		UpdateEnabled = true;

		// Disable the data inputs.
		Monitor.DisableInputs();

		// Disable the extra control buttons.
		DisableButtons();

		// Start scanning.
		Update();
	}

	// Disables auto-scan.
	function DisableUpdate() {
		UpdateEnabled = false;
		EnableButtons();
		Monitor.EnableInputs();

	}

	// Triggers a single scan.
	function SingleScan() {
		Update();
	}

	// Run an update cycle.
	function Update() {

		// Get the soft logic data table values and display them.
		ServerData.SendGetRequest("/statdata/sysdatatable.js?addr=" + Monitor.GetAddresses());

		// Schedule the next scan if auto-scanning is enabled. 
		if (UpdateEnabled) {
			window.setTimeout("Update()", 1000);
		}
	}

	</script>

</body>


</html>

<!-- Copyright 2008 - 2010. Michael Griffin 
This file is part of MBLogic.
MBLogic is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.
MBLogic is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the 
GNU General Public License for more details.
You should have received a copy of the GNU General Public License 
along with MBLogic. If not, see <http://www.gnu.org/licenses/>. 
-->

